!function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var r,n;r=i(1),n=function(t){var e,i,n,o,a,s,h;return e=new r(t.width,t.height),i=0,n=null,o=null,a={},s=function(t){var r,n;r=t.data;for(var o=0;o<r.length;o+=4)n=r[o],r[o]=r[o+2],r[o+2]=n;return e.writeFrame(r,t.width,t.height,t.colorDepth)},h=function(t,e){var i,r,n;if(r=e.data,t)if(t instanceof Uint8Array)for(n=i=0;i<r.length;n=i+=1)r[n]=t[n];else for(n=i=0;i<r.length;n=i+=1)r[n]=t.charCodeAt(n)},this.run=function(){return e.firstFrame?(self.postMessage(e.stream()),self.postMessage({finished:!0}),e.end()):void 0},this.load=function(t){var r;if(self.postMessage({type:"setStatus",status:"Loading frame "+i+" of "+t.frames.length+"..."}),o=t.globalPalette,r=new Uint8Array(t.data),h(t.data,{data:r}),null!=t.transparent&&(n=t.transparent),s({data:r,width:t.width,height:t.height,colorDepth:t.colorDepth}),i+=1,i<t.frames.length){if(0===i%10)return a[i]=setTimeout(function(){return self.postMessage({type:"setProgress",progress:i/t.frames.length})},1);if(0===i%60)return a[i]=setTimeout(function(){return self.postMessage({type:"setProgress",progress:i/t.frames.length})},1)}else{if(self.postMessage({type:"setProgress",progress:1}),e.end(),self.postMessage(e.stream()),self.postMessage({finished:!0}),e.destroy(),0!==Object.keys(a).length){var h=function(t){return clearTimeout(a[t])};for(var l in a)h(l)}return e=new r(t.width,t.height)}},this.abort=function(){var t;if(e&&(e.destroy(),e=new r(t.width,t.height)),0!==Object.keys(a).length){var i=function(t){return clearTimeout(a[t])};for(var n in a)i(n)}return self.postMessage({error:"aborted"})}},self.onmessage=function(t){var e;if(e=new n(t.data.options),"abort"===t.data.type)return e.abort();if(t.data.frames)return e.load(t.data.frames);if(t.data.firstFrame)return e.firstFrame=!0,e.run()}},function(t,e){var i,r,n,o,a,s,h,l,f,u,c,d,p,g,v,y,m,w,x,b,M,P,C,B,E,T,A,_,D,S,k,F,I,U,R,L,O,N,G,q,W,X,Y,j,z,H,K,Q,V,J,$,Z,tt;for(tt=function(t){var e,i,r;for(t=t.slice(0),r=t.length;r;)i=Math.floor(Math.random()*r),r-=1,e=t[r],t[r]=t[i],t[i]=e;return t},O=function(t,e){return 0|t+Math.random()*(e-t)},u=function(t,e){var i,r,n;if(i=t[0],1===t.length)return i;for(r=0,n=e/(t.length-1);r<t.length-1;)if(e<(r+1)*n)return i=O(t[r],t[r+1]),i;return t[t.length-1]},K=function(){function t(t,e,i,r,n,o,a,s,h){var l;for(this.r1=t,this.r2=e,this.g1=i,this.g2=r,this.b1=n,this.b2=o,this.hue_rot=null!=a?a:0,this.sat_adj=null!=s?s:0,this.val_adj=null!=h?h:0,t=[],l=0;l<360;)t.push(this.hue_rotator(l)),l+=1;return this.hue_map=t,this}return t.prototype.get_random_color=function(){var t,e,i;return t=O(0,255),e=O(0,255),i=O(0,255),[t,e,i,255]},t.prototype.rotate_rgb=function(t,e,i){var r,n,o,a,s,h,l,f,u,c,d,p;return d=t/255,p=e/255,h=i/255,s=.4124*d+.3576*p+.1805*h,f=.2126*d+.7152*p+.0722*h,o=.0193*d+.1192*p+.9505*h,l=.4124+.3576+.1805,c=.2126+.7152+.0722,n=.0193+.1192+.9505,s/=l,f/=c,o/=n,"array"==typeof s&&(s=s[0],f=f[0],o=o[0]),a=s>0&&f>0&&o>0?1:0,[s=Math.pow(s,a),f=Math.pow(f,a),o=Math.pow(o,a),r=s+f+o],u=this.xyz2rgb(s,f,o),t=u[0],e=u[1],i=u[2],[Math.round(255*t),Math.round(255*e),Math.round(255*i)]},t.prototype.xyz2rgb=function(t,e,i){var r,n,o;return r=3.2406*t+-1.5372*e+-.4986*i,n=-.9689*t+1.8758*e+.0415*i,o=.0557*t+-.204*e+1.057*i,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:12.92*o,[r=Math.max(0,Math.min(1,r)),n=Math.max(0,Math.min(1,n)),o=Math.max(0,Math.min(1,o))]},t.prototype._rgb2hsv=function(t,e,i){var r,n,o,a,s;return t/=255,e/=255,i/=255,a=Math.min(t,e,i),s=Math.max(t,e,i),o=s-a,r=0===s?0:o/s,0===o?n=0:s===t?n=((e-i)/o+6)%6:s===e?n=(i-t)/o+2:s===i&&(n=(t-e)/o+4),n/=6,[360*n,r,s]},t.prototype._hsv2rgb=function(t,e,i){var r,n,o,a,s,h,l,f;switch(t=6*t,r=Math.floor(t),l=i*(1-e),f=i*(1-e*(t-r)),h=i*(1-e*(1-(t-r))),r%6){case 0:s=i,a=h,n=l;break;case 1:s=f,a=i,n=l;break;case 2:s=l,a=i,n=h;break;case 3:s=l,a=f,n=i;break;case 4:s=h,a=l,n=i;break;case 5:s=i,a=l,n=f}return o=[Math.floor(255*s),Math.floor(255*a),Math.floor(255*n)],o},t.prototype.hue_rotator=function(t){var e,i,r,n;return e=this._rgb2hsv(this.r1,this.g1,this.b1),i=this._rgb2hsv(this.r2,this.g2,this.b2),r=(t+this.hue_rot)%360,n=this._hsv2rgb(r/360,Math.min(1,Math.max(0,u([e[1],i[1]],t/360)+this.sat_adj)),Math.min(1,Math.max(0,u([e[2],i[2]],t/360)+this.val_adj))),n},t.prototype.get_color=function(t){return t%=360,this.hue_map[t]},t}(),n=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.rotate=function(e){var i,r,n,o;return n=this.x,o=this.y,i=Math.cos(e),r=Math.sin(e),new t(i*n-r*o,r*n+i*o)},t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.scale=function(e){return new t(this.x*e,this.y*e)},t.prototype.normalize=function(){return this.scale(1/this.length())},t}(),f=function(){function t(){this.vel=new n(0,0),this.acc=new n(0,0),this.pos=new n(0,0),this.size=2.5,this.stopped=!1,this.age=0,this.life=50,this.dead=!1}return t.prototype.initialize=function(t){return this.pos=t.pos,this.vel=t.vel,this.size=t.size,this.life=t.life,this.age=t.age,this.dead=t.dead,this.stopped=t.stopped,this.acc=t.acc,this},t.prototype.add_force=function(t){if(!this.stopped)return this.acc=this.acc.add(t)},t.prototype.minimize_force=function(t){var e;return e=new n(Math.min(Math.abs(t.x),.5)*Math.min(t.x/Math.abs(t.x),1),Math.min(Math.abs(t.y),.5)*Math.min(t.y/Math.abs(t.y),1)),this.acc=this.acc.add(e)},t.prototype.update=function(t){var e;if(!this.stopped)return this.vel=this.vel.add(this.acc.scale(t)),this.pos=this.pos.add(this.vel.scale(t)),this.acc=new n(0,0);this.age+=1,e=this.age/this.life,e>=1?this.dead=!0:void 0},t}(),i=function(){function t(t,e,i,r,n,o,a,s){var h,l;for(this.intensity=t,this.r1=e,this.g1=i,this.b1=r,this.r2=n,this.g2=o,this.b2=a,this.color_sel=s,h=[],l=0;l<360;)h.push(this.color_sel.get_color(l)),l+=1;this.color_map=h}return t.prototype.get_color=function(t){var e;return t>=360&&(t%=360),e=this.color_map[Math.floor(t)],{r:e[0],g:e[1],b:e[2]}},t.prototype.get_line_color=function(t,e){var i;if(0===e)return{r:this.r1,g:this.g1,b:this.b1};if(1===e)return{r:this.r2,g:this.g2,b:this.b2};t>=360&&(t%=360);var r=this.color_sel.get_color(t);return i=this.intensity,{r:~~(e*r[0]*i+(1-e)*this.r1),g:~~(e*r[1]*i+(1-e)*this.g1),b:~~(e*r[2]*i+(1-e)*this.b1)}},t}(),W=function(t){return Array.prototype.slice.call(t,0)},q=function(t){return W(t).map(function(t){return~~(.5+t)})},G=function(t,e,i){var r,n,o;for(n=t.getContext("2d"),n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,t.width,t.height),o=4*t.width,r=0;r<t.height;){for(n=0;n<t.width;)i(e,4*(r*t.width+n),n,r),n+=1;r+=1}},N=function(t,e,i,r,n){var o,a,s,h,l,f,u,c,d,p,g,v,y,m,w,x;for(a=t.data,p=10*Math.ceil(10*r),o=Math.ceil(i/p),g=Math.ceil(e/p),u=0;u<g;){for(d=0;d<o;)for(y=null,c=0;c<p;){for(s=u*p+c,l=d*p,w=y=y||new Uint8ClampedArray(4),x=0;x<4;)h=4*(l+s*e),f=t.data[h+x],m=.1,v=4*Math.floor(.5+x/m),w